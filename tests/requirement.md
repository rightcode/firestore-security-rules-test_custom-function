### コレクションパス
students/{studentId}/records 

### ロール
* admin : システム管理者
* teacher : 教師
* student : 生徒

### recordドキュメントのフォーマット
* id: 成績ID。string型。必須。変更不可。
* studentId: 生徒ID。string型。必須。変更不可。
* season: 年度と学期。map型。必須。変更不可。
* name: 生徒の名前。string型。必須。
* homeroomTeacher: 担任。string型。必須。
* record: 成績。map型。

### 各処理共通の要件
* ログインしていないユーザはアクセス不可

### データ追加要件
* adminユーザ以外は追加不可
* 成績フィールドは空のマップ
* 所定のフォーマットでないデータは追加不可

成績評価の設定は、teacherユーザがデータ更新でのみ設定可能とします。
データ追加時に成績が設定されないように、追加時の成績フィールドは空のマップのみ設定可能としています。

### データ更新要件
* adminユーザの更新要件
    * idの更新不可
    * studentIdの更新不可
    * seasonの更新不可
    * recordの更新不可
* teacherユーザの更新要件
    * 担任でないデータは更新不可
    * 成績以外のフィールドは更新不可
    * 対象シーズンが成績評価期間外の場合は更新不可  
* studentユーザは更新不可
* 所定のフォーマットでないデータは更新不可

### データ取得要件
* adminユーザはデータの取得可
* teacherユーザの取得要件
	* 担任でないデータは取得不可
* studentユーザの取得要件
	* 自分以外のデータは取得不可
	* 対象シーズンが成績評価期間の場合は取得不可

### データ削除要件
* adminユーザ以外は削除不可

以下、テスト中で`records`コレクション以外に必要となるコレクションの要件を簡単に設定します。

### `seasons`コレクションのフォーマット
* id : シーズンID。`{year}_{semester}`のようなフォーマットで設定。string型。必須。変更不可。
* evaluationPeriod : 成績評価期間。bool型。必須。

成績評価期間の更新はadminユーザだけが行えるものと想定します。

前述の`records`コレクションの要件設定でふれた通り、評価期間中のみteacherユーザが担当生徒の成績評価を更新できるものとします。

### `users`コレクションのフォーマット
* id : ユーザID。string型。必須。変更不可。
* roles : ロール。`admin`、`teacher`または`student`を設定。list型。必須。

rolesは複数ロールを設定する場合を想定してlist型としています。

例えば、`admin`と`teacher`ロールを兼任する場合や、他のロールを追加する場合などを想定しています。

`seasons`、`users`コレクションは要件の設定のみで、本記事での実装・解説はしません。